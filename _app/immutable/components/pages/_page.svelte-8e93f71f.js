import{S as G,i as H,s as M,k as g,l as w,m as E,h as v,n as D,p as z,b as y,B as d,I as W,J as j,q as L,a as N,r as V,c as C,G as k,t as U,d as K,f as S,H as de,g as Z,w as Q,x as X,y as Y,z as x,K as T,e as B,L as O,u as R}from"../../chunks/index-6622727b.js";import{L as pe,l as me,a as ke,g as ye,b as be,c as ge,d as we}from"../../chunks/spotify-api-3cec3c5d.js";const q=/[a-zA-Z]/,F=(n,e=0)=>[...Array(n).keys()].map(l=>l+e);function te(n,e,l){const t=n.slice();return t[7]=e[l],t}function le(n){let e;return{c(){e=g("div"),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0}),E(e).forEach(v),this.h()},h(){D(e,"class","rect svelte-cihful"),z(e,"animation-delay",(n[7]-1)*(+n[6]/12)+n[5]),j(e,"pause-animation",n[4])},m(l,t){y(l,e,t)},p(l,t){t&16&&j(e,"pause-animation",l[4])},d(l){l&&v(e)}}}function Ee(n){let e,l=F(5,1),t=[];for(let s=0;s<l.length;s+=1)t[s]=le(te(n,l,s));return{c(){e=g("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var o=E(e);for(let a=0;a<t.length;a+=1)t[a].l(o);o.forEach(v),this.h()},h(){D(e,"class","wrapper svelte-cihful"),z(e,"--size",n[3]+n[1]),z(e,"--color",n[0]),z(e,"--duration",n[2])},m(s,o){y(s,e,o);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(s,[o]){if(o&112){l=F(5,1);let a;for(a=0;a<l.length;a+=1){const _=te(s,l,a);t[a]?t[a].p(_,o):(t[a]=le(_),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}o&10&&z(e,"--size",s[3]+s[1]),o&1&&z(e,"--color",s[0]),o&4&&z(e,"--duration",s[2])},i:d,o:d,d(s){s&&v(e),W(t,s)}}}function Ie(n,e,l){var c;let{color:t="#FF3E00"}=e,{unit:s="px"}=e,{duration:o="1.2s"}=e,{size:a="60"}=e,{pause:_=!1}=e,f=((c=o.match(q))==null?void 0:c[0])??"s",h=o.replace(q,"");return n.$$set=i=>{"color"in i&&l(0,t=i.color),"unit"in i&&l(1,s=i.unit),"duration"in i&&l(2,o=i.duration),"size"in i&&l(3,a=i.size),"pause"in i&&l(4,_=i.pause)},[t,s,o,a,_,f,h]}class De extends G{constructor(e){super(),H(this,e,Ie,Ee,M,{color:0,unit:1,duration:2,size:3,pause:4})}}function se(n,e,l){const t=n.slice();return t[7]=e[l],t}function ne(n){let e;return{c(){e=g("div"),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0}),E(e).forEach(v),this.h()},h(){D(e,"class","bar svelte-1vzsw15"),z(e,"left",n[7]*(+n[3]/5+(+n[3]/15-+n[3]/100))+n[1]),z(e,"animation-delay",n[7]*(+n[6]/8.3)+n[5]),j(e,"pause-animation",n[4])},m(l,t){y(l,e,t)},p(l,t){t&10&&z(e,"left",l[7]*(+l[3]/5+(+l[3]/15-+l[3]/100))+l[1]),t&16&&j(e,"pause-animation",l[4])},d(l){l&&v(e)}}}function ze(n){let e,l=F(10,0),t=[];for(let s=0;s<l.length;s+=1)t[s]=ne(se(n,l,s));return{c(){e=g("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var o=E(e);for(let a=0;a<t.length;a+=1)t[a].l(o);o.forEach(v),this.h()},h(){D(e,"class","wrapper svelte-1vzsw15"),z(e,"--size",n[3]+n[1]),z(e,"--color",n[0]),z(e,"--duration",n[2])},m(s,o){y(s,e,o);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(s,[o]){if(o&122){l=F(10,0);let a;for(a=0;a<l.length;a+=1){const _=se(s,l,a);t[a]?t[a].p(_,o):(t[a]=ne(_),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}o&10&&z(e,"--size",s[3]+s[1]),o&1&&z(e,"--color",s[0]),o&4&&z(e,"--duration",s[2])},i:d,o:d,d(s){s&&v(e),W(t,s)}}}function Le(n,e,l){var c;let{color:t="#FF3E00"}=e,{unit:s="px"}=e,{duration:o="1.25s"}=e,{size:a="60"}=e,{pause:_=!1}=e,f=((c=o.match(q))==null?void 0:c[0])??"s",h=o.replace(q,"");return n.$$set=i=>{"color"in i&&l(0,t=i.color),"unit"in i&&l(1,s=i.unit),"duration"in i&&l(2,o=i.duration),"size"in i&&l(3,a=i.size),"pause"in i&&l(4,_=i.pause)},[t,s,o,a,_,f,h]}class Ve extends G{constructor(e){super(),H(this,e,Le,ze,M,{color:0,unit:1,duration:2,size:3,pause:4})}}function ie(n,e,l){const t=n.slice();return t[10]=e[l],t}function oe(n,e,l){const t=n.slice();return t[13]=e[l],t}function Pe(n){let e,l;return e=new pe({props:{onClick:me}}),{c(){Q(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p:d,i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){x(e,t)}}}function Se(n){let e,l,t,s,o,a,_={ctx:n,current:null,token:null,hasCatch:!1,pending:Ue,then:Ce,catch:Ne,value:16,blocks:[,,,]};T(n[5],_);let f={ctx:n,current:null,token:null,hasCatch:!1,pending:Ae,then:Re,catch:Be,value:9,blocks:[,,,]};T(l=n[2],f);let h={ctx:n,current:null,token:null,hasCatch:!1,pending:qe,then:je,catch:Te,value:9};return T(o=n[3],h),{c(){_.block.c(),e=N(),f.block.c(),t=N(),s=B(),h.block.c()},l(c){_.block.l(c),e=C(c),f.block.l(c),t=C(c),s=B(),h.block.l(c)},m(c,i){_.block.m(c,_.anchor=i),_.mount=()=>e.parentNode,_.anchor=e,y(c,e,i),f.block.m(c,f.anchor=i),f.mount=()=>t.parentNode,f.anchor=t,y(c,t,i),y(c,s,i),h.block.m(c,h.anchor=i),h.mount=()=>s.parentNode,h.anchor=s,a=!0},p(c,i){n=c,O(_,n,i),f.ctx=n,i&4&&l!==(l=n[2])&&T(l,f)||O(f,n,i),h.ctx=n,i&8&&o!==(o=n[3])&&T(o,h)||O(h,n,i)},i(c){a||(S(_.block),S(f.block),a=!0)},o(c){for(let i=0;i<3;i+=1){const u=_.blocks[i];U(u)}for(let i=0;i<3;i+=1){const u=f.blocks[i];U(u)}a=!1},d(c){_.block.d(c),_.token=null,_=null,c&&v(e),f.block.d(c),f.token=null,f=null,c&&v(t),c&&v(s),h.block.d(c),h.token=null,h=null}}}function Ne(n){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Ce(n){let e,l,t=!n[0]&&ae(n);return{c(){t&&t.c(),e=B()},l(s){t&&t.l(s),e=B()},m(s,o){t&&t.m(s,o),y(s,e,o),l=!0},p(s,o){s[0]?t&&(Z(),U(t,1,1,()=>{t=null}),K()):t?(t.p(s,o),o&1&&S(t,1)):(t=ae(s),t.c(),S(t,1),t.m(e.parentNode,e))},i(s){l||(S(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&v(e)}}}function ae(n){var c;let e,l,t,s,o,a=((c=n[16])==null?void 0:c.playlists.total)+"",_,f,h;return e=new De({props:{color:"black",size:50}}),{c(){Q(e.$$.fragment),l=N(),t=g("div"),s=L("Loading "),o=g("b"),_=L(a),f=L(" playlists"),this.h()},l(i){X(e.$$.fragment,i),l=C(i),t=w(i,"DIV",{class:!0});var u=E(t);s=V(u,"Loading "),o=w(u,"B",{});var r=E(o);_=V(r,a),r.forEach(v),f=V(u," playlists"),u.forEach(v),this.h()},h(){D(t,"class","pt-5 text-lg")},m(i,u){Y(e,i,u),y(i,l,u),y(i,t,u),k(t,s),k(t,o),k(o,_),k(t,f),h=!0},p:d,i(i){h||(S(e.$$.fragment,i),h=!0)},o(i){U(e.$$.fragment,i),h=!1},d(i){x(e,i),i&&v(l),i&&v(t)}}}function Ue(n){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Be(n){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Re(n){let e,l,t=!n[1]&&n[0]&&ce(n);return{c(){t&&t.c(),e=B()},l(s){t&&t.l(s),e=B()},m(s,o){t&&t.m(s,o),y(s,e,o),l=!0},p(s,o){!s[1]&&s[0]?t?(t.p(s,o),o&3&&S(t,1)):(t=ce(s),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(Z(),U(t,1,1,()=>{t=null}),K())},i(s){l||(S(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&v(e)}}}function ce(n){let e,l,t,s,o,a=n[9].length+"",_,f,h,c,i,u;return e=new Ve({props:{color:"black",size:50}}),{c(){Q(e.$$.fragment),l=N(),t=g("div"),s=L("Loading tracks for "),o=g("b"),_=L(a),f=L(" playlists."),h=N(),c=g("div"),i=L("(filtered out your liked playlists)"),this.h()},l(r){X(e.$$.fragment,r),l=C(r),t=w(r,"DIV",{class:!0});var p=E(t);s=V(p,"Loading tracks for "),o=w(p,"B",{});var b=E(o);_=V(b,a),b.forEach(v),f=V(p," playlists."),p.forEach(v),h=C(r),c=w(r,"DIV",{});var m=E(c);i=V(m,"(filtered out your liked playlists)"),m.forEach(v),this.h()},h(){D(t,"class","pt-5 text-lg")},m(r,p){Y(e,r,p),y(r,l,p),y(r,t,p),k(t,s),k(t,o),k(o,_),k(t,f),y(r,h,p),y(r,c,p),k(c,i),u=!0},p(r,p){(!u||p&4)&&a!==(a=r[9].length+"")&&R(_,a)},i(r){u||(S(e.$$.fragment,r),u=!0)},o(r){U(e.$$.fragment,r),u=!1},d(r){x(e,r),r&&v(l),r&&v(t),r&&v(h),r&&v(c)}}}function Ae(n){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Te(n){return{c:d,l:d,m:d,p:d,d}}function je(n){let e,l=n[1]&&re(n);return{c(){l&&l.c(),e=B()},l(t){l&&l.l(t),e=B()},m(t,s){l&&l.m(t,s),y(t,e,s)},p(t,s){t[1]?l?l.p(t,s):(l=re(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&v(e)}}}function re(n){let e,l,t,s=n[9].length+"",o,a,_,f,h,c,i,u,r,p=n[9],b=[];for(let m=0;m<p.length;m+=1)b[m]=ue(ie(n,p,m));return{c(){e=g("div"),l=g("div"),t=g("b"),o=L(s),a=L(" playlists exported"),_=N(),f=g("div"),h=g("a"),c=L("Download as text file"),u=N();for(let m=0;m<b.length;m+=1)b[m].c();r=B(),this.h()},l(m){e=w(m,"DIV",{class:!0});var P=E(e);l=w(P,"DIV",{});var I=E(l);t=w(I,"B",{});var A=E(t);o=V(A,s),A.forEach(v),a=V(I," playlists exported"),I.forEach(v),_=C(P),f=w(P,"DIV",{class:!0});var $=E(f);h=w($,"A",{href:!0,download:!0});var ee=E(h);c=V(ee,"Download as text file"),ee.forEach(v),$.forEach(v),P.forEach(v),u=C(m);for(let J=0;J<b.length;J+=1)b[J].l(m);r=B(),this.h()},h(){D(h,"href",i=window.URL.createObjectURL(new Blob([he(n[9])],{type:"text/plain"}))),D(h,"download","spotify-export.txt"),D(f,"class","text-2xl underline"),D(e,"class","text-center")},m(m,P){y(m,e,P),k(e,l),k(l,t),k(t,o),k(l,a),k(e,_),k(e,f),k(f,h),k(h,c),y(m,u,P);for(let I=0;I<b.length;I+=1)b[I].m(m,P);y(m,r,P)},p(m,P){if(P&8&&s!==(s=m[9].length+"")&&R(o,s),P&8&&i!==(i=window.URL.createObjectURL(new Blob([he(m[9])],{type:"text/plain"})))&&D(h,"href",i),P&8){p=m[9];let I;for(I=0;I<p.length;I+=1){const A=ie(m,p,I);b[I]?b[I].p(A,P):(b[I]=ue(A),b[I].c(),b[I].m(r.parentNode,r))}for(;I<b.length;I+=1)b[I].d(1);b.length=p.length}},d(m){m&&v(e),m&&v(u),W(b,m),m&&v(r)}}}function _e(n){let e,l=n[10].description+"",t;return{c(){e=g("div"),t=L(l),this.h()},l(s){e=w(s,"DIV",{class:!0});var o=E(e);t=V(o,l),o.forEach(v),this.h()},h(){D(e,"class","text-xl pb-2")},m(s,o){y(s,e,o),k(e,t)},p(s,o){o&8&&l!==(l=s[10].description+"")&&R(t,l)},d(s){s&&v(e)}}}function fe(n){let e,l=n[13].track.name+"",t,s,o=ve(n[13])+"",a;return{c(){e=g("div"),t=L(l),s=L(" - "),a=L(o),this.h()},l(_){e=w(_,"DIV",{class:!0});var f=E(e);t=V(f,l),s=V(f," - "),a=V(f,o),f.forEach(v),this.h()},h(){D(e,"class","pb-1")},m(_,f){y(_,e,f),k(e,t),k(e,s),k(e,a)},p(_,f){f&8&&l!==(l=_[13].track.name+"")&&R(t,l),f&8&&o!==(o=ve(_[13])+"")&&R(a,o)},d(_){_&&v(e)}}}function ue(n){let e,l,t=n[10].name+"",s,o,a,_,f=n[10].description&&_e(n),h=n[10].tracks,c=[];for(let i=0;i<h.length;i+=1)c[i]=fe(oe(n,h,i));return{c(){e=g("div"),l=g("div"),s=L(t),o=N(),f&&f.c(),a=N();for(let i=0;i<c.length;i+=1)c[i].c();_=N(),this.h()},l(i){e=w(i,"DIV",{class:!0});var u=E(e);l=w(u,"DIV",{class:!0});var r=E(l);s=V(r,t),r.forEach(v),o=C(u),f&&f.l(u),a=C(u);for(let p=0;p<c.length;p+=1)c[p].l(u);_=C(u),u.forEach(v),this.h()},h(){D(l,"class","font-bold text-2xl pb-2"),D(e,"class","w-full p-2")},m(i,u){y(i,e,u),k(e,l),k(l,s),k(e,o),f&&f.m(e,null),k(e,a);for(let r=0;r<c.length;r+=1)c[r].m(e,null);k(e,_)},p(i,u){if(u&8&&t!==(t=i[10].name+"")&&R(s,t),i[10].description?f?f.p(i,u):(f=_e(i),f.c(),f.m(e,a)):f&&(f.d(1),f=null),u&8){h=i[10].tracks;let r;for(r=0;r<h.length;r+=1){const p=oe(i,h,r);c[r]?c[r].p(p,u):(c[r]=fe(p),c[r].c(),c[r].m(e,_))}for(;r<c.length;r+=1)c[r].d(1);c.length=h.length}},d(i){i&&v(e),f&&f.d(),W(c,i)}}}function qe(n){return{c:d,l:d,m:d,p:d,d}}function Fe(n){let e,l,t,s,o,a,_,f;const h=[Se,Pe],c=[];function i(u,r){return u[4]!=null?0:1}return a=i(n),_=c[a]=h[a](n),{c(){e=g("main"),l=g("div"),t=g("h1"),s=L("Spotify Export"),o=N(),_.c(),this.h()},l(u){e=w(u,"MAIN",{class:!0});var r=E(e);l=w(r,"DIV",{class:!0});var p=E(l);t=w(p,"H1",{class:!0});var b=E(t);s=V(b,"Spotify Export"),b.forEach(v),o=C(p),_.l(p),p.forEach(v),r.forEach(v),this.h()},h(){D(t,"class","title pb-5 svelte-11dq9qd"),D(l,"class","flex flex-col items-center justify-center min-h-full"),D(e,"class","py-5")},m(u,r){y(u,e,r),k(e,l),k(l,t),k(t,s),k(l,o),c[a].m(l,null),f=!0},p(u,[r]){let p=a;a=i(u),a===p?c[a].p(u,r):(Z(),U(c[p],1,1,()=>{c[p]=null}),K(),_=c[a],_?_.p(u,r):(_=c[a]=h[a](u),_.c()),S(_,1),_.m(l,null))},i(u){f||(S(_),f=!0)},o(u){U(_),f=!1},d(u){u&&v(e),c[a].d()}}}function he(n){return n.reduce((e,l)=>`${e}# ${l.name}
${l.tracks.reduce((t,s)=>`${t}${s.track.name} - ${s.track.artists.map(o=>o.name).join(", ")}
`,"")}
`,"")}function ve(n){return n.track.artists.map(e=>e.name).join(", ")}function We(n,e,l){let t;de(n,ke,u=>l(4,t=u));let s=!1,o=!1,a=Promise.resolve({}),_=Promise.resolve([]);async function f(){if(t!=null){const u=await ye(),r=await be();return l(2,a=h(r.id)),{playlists:u,userInfo:r}}}async function h(u){const r=await ge({filter:{ownerId:u}});return l(0,s=!0),l(3,_=c(r)),r}async function c(u){const r=await we(u);return console.log(r),l(1,o=!0),r}let i=f();return[s,o,a,_,t,i]}class Ge extends G{constructor(e){super(),H(this,e,We,Fe,M,{})}}export{Ge as default};
